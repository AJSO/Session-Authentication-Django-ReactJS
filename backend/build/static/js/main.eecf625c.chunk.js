(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{69:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(0),r=a.n(c),s=a(21),o=a.n(s),i=a(11),l=a(3),u=a(12),d=a(5),j=a.n(d),p=a(13),b=a(14),h=a.n(b),m=a(19),O=a.n(m),f="REGISTER_SUCCESS",x="REGISTER_FAIL",v="LOGIN_SUCCESS",g="LOGIN_FAIL",N="LOGOUT_SUCCESS",y="LOGOUT_FAIL",w="AUTHENTICATED_SUCCESS",S="AUTHENTICATED_FAIL",A="LOAD_USER_PROFILE_SUCCESS",k="LOAD_USER_PROFILE_FAIL",_="UPDATE_USER_PROFILE_SUCCESS",C="UPDATE_USER_PROFILE_FAIL",E=function(){return function(){var e=Object(p.a)(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Accept:"application/json","Content-Type":"application/json"}},e.prev=1,e.next=4,h.a.get("".concat("http://localhost:8000","/profile/user"),a);case 4:(n=e.sent).data.error?t({type:k}):t({type:A,payload:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:k});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},L=Object(u.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{logout:function(){return function(){var e=Object(p.a)(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={header:{Accept:"application/json","Content-Type":"application/json","x-CSRFToken":O.a.get("csrftoken")}},n=JSON.stringify({withCredentials:!0}),e.prev=2,e.next=5,h.a.post("".concat("http://localhost:8000","/users/logout"),n,a);case 5:e.sent.data.success?t({type:N}):t({type:y}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),t({type:y});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()}})((function(e){var t=e.isAuthenticated,a=e.logout,r=Object(n.jsxs)(c.Fragment,{children:[Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(i.c,{className:"nav-link",to:"/dashboard",children:"Dashboard"})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)("a",{className:"nav-link",onClick:a,href:"#!",children:"Logout"})})]}),s=Object(n.jsxs)(c.Fragment,{children:[Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(i.c,{className:"nav-link",to:"/login",children:"Login"})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(i.c,{className:"nav-link",to:"/register",children:"Register"})})]});return Object(n.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:Object(n.jsxs)("div",{className:"container-fluid",children:[Object(n.jsx)(i.b,{className:"navbar-brand",exact:!0,to:"/",children:"Session Auth"}),Object(n.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(n.jsx)("span",{className:"navbar-toggler-icon"})}),Object(n.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:Object(n.jsx)("ul",{className:"navbar-nav",children:t?r:s})})]})})})),R=Object(u.b)(null,{checkAuthenticated:function(){return function(){var e=Object(p.a)(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Accept:"application/json","Content-Type":"application/json"}},e.prev=1,e.next=4,h.a.get("".concat("http://localhost:8000","/users/authenticated"),a);case 4:(n=e.sent).data.error||"error"===n.data.isAuthenticated?t({type:S,payload:!1}):"success"===n.data.isAuthenticated?t({type:w,payload:!0}):t({type:S,payload:!1}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:S,payload:!1});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},load_user:E})((function(e){var t=e.children,a=e.checkAuthenticated,r=e.load_user;return Object(c.useEffect)((function(){a(),r()}),[]),Object(n.jsxs)(c.Fragment,{children:[Object(n.jsx)(L,{}),t]})})),T=function(){return Object(n.jsx)("div",{className:"container",children:Object(n.jsxs)("header",{className:"masthead text-white text-center bg-info mt-5",children:[Object(n.jsx)("div",{className:"overlay"}),Object(n.jsx)("div",{className:"container",children:Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)("div",{className:"col-xl-9 mx-auto",children:Object(n.jsx)("h1",{className:"mb-5 mt-5",children:"Session Authentication"})}),Object(n.jsx)("div",{className:"col-md-10 col-lg-8 col-xl-7 mx-auto"})]})})]})})},U=a(18),F=a(4),I=a(16),P=(a(69),function(){var e=Object(c.useState)(""),t=Object(I.a)(e,2),a=t[0],r=t[1];return Object(c.useEffect)((function(){(function(){var e=Object(p.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get("".concat("http://localhost:8000","/users/csrf_cookie"));case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}})()(),r(function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var c=a[n].trim();if(c.substring(0,e.length+1)===e+"="){t=decodeURIComponent(c.substring(e.length+1));break}}return t}("csrftoken"))}),[]),Object(n.jsx)("input",{type:"hidden",name:"csrfmiddlewaretoken",value:a})}),D=Object(u.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{register:function(e,t,a){return function(){var n=Object(p.a)(j.a.mark((function n(c){var r,s;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={header:{Accept:"application/json","Content-Type":"application/json","x-CSRFToken":O.a.get("csrftoken")}},s=JSON.stringify({username:e,password:t,re_password:a}),n.prev=2,n.next=5,h.a.post("".concat("http://localhost:8000","/users/register"),s,r);case 5:n.sent.data.error?c({type:x}):c({type:f}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),c({type:x});case 12:case"end":return n.stop()}}),n,null,[[2,9]])})));return function(e){return n.apply(this,arguments)}}()}})((function(e){var t=e.register,a=e.isAuthenticated,r=Object(c.useState)({username:"",password:"",re_password:""}),s=Object(I.a)(r,2),o=s[0],u=s[1],d=Object(c.useState)(!1),j=Object(I.a)(d,2),p=j[0],b=j[1],h=o.username,m=o.password,O=o.re_password,f=function(e){return u(Object(F.a)(Object(F.a)({},o),{},Object(U.a)({},e.target.name,e.target.value)))};return a?Object(n.jsx)(l.a,{to:"/dashboard"}):p?Object(n.jsx)(l.a,{to:"/login"}):Object(n.jsx)("div",{className:"register",children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsxs)("form",{className:"form",onSubmit:function(e){return function(e){e.preventDefault(),m===O&&(t(h,m,O),b(!0))}(e)},children:[Object(n.jsx)("h3",{children:"Register Here"}),Object(n.jsx)(P,{}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{className:"form-label  mt-3",children:"Username:"}),Object(n.jsx)("input",{type:"text",className:"form-control",placeholder:"Username",name:"username",value:h,onChange:function(e){return f(e)},required:!0})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{className:"form-label mt-3",children:"Password:"}),Object(n.jsx)("input",{type:"password",className:"form-control",placeholder:"Password",name:"password",value:m,minLength:"6",onChange:function(e){return f(e)},required:!0})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{className:"form-label mt-3",children:"Confirm Password"}),Object(n.jsx)("input",{type:"password",className:"form-control",placeholder:"Confirm Password",name:"re_password",value:O,minLength:"6",onChange:function(e){return f(e)},required:!0})]}),Object(n.jsx)("button",{type:"submit",className:"btn btn-primary mt-3",children:"Register"})]}),Object(n.jsxs)("p",{className:"forgot-password text-right mt-3",children:["Already have an account? ",Object(n.jsx)(i.b,{to:"/login",children:"Login"})]})]})})})),G=Object(u.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{login:function(e,t){return function(){var a=Object(p.a)(j.a.mark((function a(n){var c,r;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c={header:{Accept:"application/json","Content-Type":"application/json","x-CSRFToken":O.a.get("csrftoken")}},r=JSON.stringify({username:e,password:t}),a.prev=2,a.next=5,h.a.post("".concat("http://localhost:8000","/users/login"),r,c);case 5:a.sent.data.success?(n({type:v}),n(E())):n({type:g}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(2),n({type:g});case 12:case"end":return a.stop()}}),a,null,[[2,9]])})));return function(e){return a.apply(this,arguments)}}()}})((function(e){var t=e.login,a=e.isAuthenticated,r=Object(c.useState)({username:"",password:""}),s=Object(I.a)(r,2),o=s[0],u=s[1],d=o.username,j=o.password,p=function(e){return u(Object(F.a)(Object(F.a)({},o),{},Object(U.a)({},e.target.name,e.target.value)))};return a?Object(n.jsx)(l.a,{to:"/dashboard"}):Object(n.jsx)("div",{className:"login",children:Object(n.jsx)("div",{className:"container",children:Object(n.jsxs)("form",{className:"form",onSubmit:function(e){return function(e){e.preventDefault(),t(d,j)}(e)},children:[Object(n.jsx)(P,{}),Object(n.jsx)("h3",{children:"Log in"}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{className:"form-label  mt-3",children:"Username:"}),Object(n.jsx)("input",{type:"text",autoFocus:!0,className:"form-control",placeholder:"Username",name:"username",value:d,onChange:function(e){return p(e)},required:!0})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{className:"form-label mt-3",children:"Password:"}),Object(n.jsx)("input",{type:"password",autoFocus:!0,className:"form-control",placeholder:"Password",name:"password",value:j,minLength:"6",onChange:function(e){return p(e)},required:!0})]}),Object(n.jsx)("div",{className:"form-group",children:Object(n.jsxs)("div",{className:"custom-control custom-checkbox mt-3",children:[Object(n.jsx)("input",{type:"checkbox",className:"custom-control-input",id:"customCheck1"}),Object(n.jsx)("label",{className:"custom-control-label",htmlFor:"customCheck1",children:"Remember me"})]})}),Object(n.jsx)("button",{type:"submit",className:"btn btn-primary mt-3",children:"Sign in"}),Object(n.jsxs)("p",{className:"forgot-password text-right",children:["Forgot ",Object(n.jsx)("a",{href:"!#",children:"password?"})]}),Object(n.jsxs)("p",{className:"forgot-password text-right",children:["Have no account yet? ",Object(n.jsx)(i.b,{to:"/register",children:"Register"})]})]})})})})),q=function(){return Object(n.jsx)("div",{children:"Dashboard"})},J=a(15),H=a(38),M=a(39),B={isAuthenticated:null},W={username:"",first_name:"",last_name:"",phone:"",city:""},z=Object(J.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case w:case S:return Object(F.a)(Object(F.a)({},e),{},{isAuthenticated:n});case f:return Object(F.a)(Object(F.a)({},e),{},{isAuthenticated:!1,loading:!0});case v:return Object(F.a)(Object(F.a)({},e),{},{isAuthenticated:!0});case N:return Object(F.a)(Object(F.a)({},e),{},{isAuthenticated:!1});case g:case y:case x:default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case A:case _:return Object(F.a)(Object(F.a)({},e),{},{username:n.username,first_name:n.profile.first_name,last_name:n.profile.last_name,phone:n.profile.phone,city:n.profile.city});case k:return Object(F.a)(Object(F.a)({},e),{},{username:"",first_name:"",last_name:"",phone:"",city:""});case C:return Object(F.a)({},e);default:return e}}}),K=[M.a],Q=Object(J.createStore)(z,{},Object(H.composeWithDevTools)(J.applyMiddleware.apply(void 0,K))),V=function(){return Object(n.jsx)(u.a,{store:Q,children:Object(n.jsx)(i.a,{children:Object(n.jsxs)(R,{children:[Object(n.jsx)(l.b,{exact:!0,path:"/",component:T}),Object(n.jsx)(l.b,{exact:!0,path:"/login",component:G}),Object(n.jsx)(l.b,{exact:!0,path:"/register",component:D}),Object(n.jsx)(l.b,{exact:!0,path:"/",component:q})]})})})};o.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(V,{})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.eecf625c.chunk.js.map